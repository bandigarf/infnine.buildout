<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="infnine.data">
<head>
</head>

<body>
<div metal:fill-slot="main">

    <div tal:replace="structure provider:plone.abovecontenttitle" />

    <table class="invisible">
        <tbody>
        <tr>
            <td tal:define="photo context/photo|nothing" tal:condition="photo">
                <img src="photo">
            </td>
            <td>
                <h1 class="documentFirstHeading" tal:replace="context/title" />

                <div tal:condition="python: context.status != None">
                    <span tal:replace="context/status" />
                    <span tal:condition="python: (context.status == 'Alumnus') and (context.alumni_date != None)"
                          tal:replace="python: 'from ' + `context.alumni_date.year` + '-' + `context.alumni_date.month` + '-' + `context.alumni_date.day`" />
                </div>

                <div tal:condition="python: context.position != None" tal:content="context/position" />

                <div tal:condition="python: context.department != None" tal:content="context/department" />

                <div tal:condition="python: context.email != None">E-Mail: <span tal:content="context/email" /></div>

                <div tal:condition="python: context.telephone != None">Telephone: <span tal:content="context/telephone" /></div>

                <div tal:condition="python: context.fax != None">Fax: <span tal:content="context/fax" /></div>

                <div tal:condition="python: context.office != None">Office: <span tal:content="context/office" /></div>
            </td>
        </tr>
        </tbody>
    </table>

    <div tal:define="text context/introduction"
         tal:condition="python: text != None"
         tal:content="structure text" />

    <div tal:define="text context/publications" tal:condition="python: text != None">
        <h2>Publications</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="publications python:[publication[0] for publication in portal.publications.items()
                                                 if publication[1].meta_type == 'Publication']"
                tal:condition="python: item in publications">
                <a tal:attributes="href python: context.portal_url() + '/publications/' + item">
                    <span tal:content="python: portal.publications.__getitem__(item).title" />
                </a>
            </li>
        </ul>
    </div>

    <div tal:define="items context/research_topics" tal:condition="python: items != None">
        <h2>Research Topics</h2>
        <ul tal:repeat="item items">
            <li>
                <span tal:content="item" />
            </li>
        </ul>
    </div>

    <div tal:define="text context/research_projects_current" tal:condition="python: text != None">
        <h2>Current Research Projects</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="projects python:[project[0] for project in portal.research.items()
                                             if project[1].meta_type == 'Research Project']"
                tal:condition="python: item in projects">
                <a tal:attributes="href python: context.portal_url() + '/research/' + item">
                    <span tal:replace="python: portal.research.__getitem__(item).title" />
                </a>
                : <span tal:replace="python: portal.research.__getitem__(item).description" />
            </li>
        </ul>
    </div>

    <div tal:define="text context/research_projects_former" tal:condition="python: text != None">
        <h2>Former Research Projects</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="projects python:[project[0] for project in portal.research.items()
                                             if project[1].meta_type == 'Research Project']"
                tal:condition="python: item in projects">
                <a tal:attributes="href python: context.portal_url() + '/research/' + item">
                    <span tal:content="python: portal.research.__getitem__(item).title" />
                </a>
                : <span tal:replace="python: portal.research.__getitem__(item).description" />
            </li>
        </ul>
    </div>

    <div tal:define="text context/teaching" tal:condition="python: text != None">
        <h2>Teaching</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="teachings python:[teaching[0] for teaching in portal.teaching.items()
                                              if teaching[1].meta_type == 'Teaching']"
                tal:condition="python: item in teachings">
                <a tal:attributes="href python: context.portal_url() + '/teaching/' + item">
                    <span tal:content="python: portal.teaching.__getitem__(item).title" />
                </a>
            </li>
        </ul>
    </div>

    <div tal:define="text context/students" tal:condition="python: text != None">
        <h2>Students</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="people python:[person[0] for person in portal.people.items()
                                           if person[1].meta_type == 'Person']"
                tal:condition="python: item in people">
                <a tal:attributes="href python: context.portal_url() + '/people/' + item">
                    <span tal:content="python: portal.people.__getitem__(item).title" />
                </a>
            </li>
        </ul>
    </div>

    <div tal:define="text context/misc"
         tal:condition="python: text != None"
         tal:content="structure text" />

    <hr />

    <div tal:replace="structure provider:plone.abovecontentbody" />

    <div tal:replace="structure provider:plone.belowcontentbody" />

</div>
</body>
</html>
