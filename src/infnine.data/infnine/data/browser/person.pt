<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="infnine.data">
<head>
</head>

<body>
<div metal:fill-slot="main">

    <div tal:replace="structure provider:plone.abovecontenttitle" />

    <table class="invisible">
        <tbody>
        <tr>
            <td tal:define="photo context/photo|nothing" tal:condition="photo">
                <img class="personphoto" src="photo">
            </td>
            <td>
                <h1 class="documentFirstHeading" tal:content="context/title" />

                <div tal:condition="python: context.status != None">
                    <span tal:replace="context/status" />
                    <span tal:condition="python: (context.status == 'Alumnus') and (context.alumni_date != None)"
                          tal:replace="python: 'from ' + `context.alumni_date.year` + '-' + `context.alumni_date.month` + '-' + `context.alumni_date.day`" />
                </div>

                <div tal:condition="python: context.position != None" tal:content="context/position" />

                <div tal:condition="python: context.department != None" tal:content="context/department" />

                <table>
                    <tbody>
                        <tr tal:condition="python: context.email != None">
                            <td>E-Mail:</td><td tal:content="context/email" />
                        </tr>

                        <tr tal:condition="python: context.telephone != None">
                            <td>Telephone:</td><td tal:content="context/telephone" />
                        </tr>

                        <tr tal:condition="python: context.fax != None">
                            <td>Fax:</td><td tal:content="context/fax" />
                        </tr>

                        <tr tal:condition="python: context.office != None">
                            <td>Office:</td><td><a href="" tal:attributes="href python: context.portal_url() + '/offices'"><span tal:replace="context/office" /></a></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        </tbody>
    </table>

    <div tal:define="text context/introduction"
         tal:condition="python: text != None"
         tal:content="structure text" />

    <div tal:define="items context/research_topics" tal:condition="python: (items != None) and (len(items) > 0)">
        <h2>Research Topics</h2>
        <ul tal:repeat="item items">
            <li>
                <span tal:content="item" />
            </li>
        </ul>
    </div>

    <div tal:define="text context/research_projects_current" tal:condition="python: text != None">
        <h2>Current Research Projects</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="projects python:[project[0] for project in portal.research.items()
                                             if project[1].meta_type == 'Research Project']"
                tal:condition="python: item in projects">
                <a tal:attributes="href python: context.portal_url() + '/research/' + item">
                    <span tal:replace="python: portal.research.__getitem__(item).title" />
                </a>
                : <span tal:replace="python: portal.research.__getitem__(item).summary" />
            </li>
        </ul>
    </div>

    <div tal:define="text context/research_projects_former" tal:condition="python: text != None">
        <h2>Former Research Projects</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="projects python:[project[0] for project in portal.research.items()
                                             if project[1].meta_type == 'Research Project']"
                tal:condition="python: item in projects">
                <a tal:attributes="href python: context.portal_url() + '/research/' + item">
                    <span tal:content="python: portal.research.__getitem__(item).title" />
                </a>
                : <span tal:replace="python: portal.research.__getitem__(item).description" />
            </li>
        </ul>
    </div>

    <div tal:define="text context/teaching" tal:condition="python: text != None">
        <h2>Teaching (Current Term)</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="teachings python:[teaching[0] for teaching in portal.teaching.__getitem__(portal.teaching.default_page).items()
                                              if teaching[1].meta_type in ['Lecture', 'Practical Course', 'Seminar']]"
                tal:condition="python: item in teachings">
                <a tal:attributes="href python: context.portal_url() + '/teaching/' + portal.teaching.default_page + '/' + item">
                    <span tal:replace="python: portal.teaching.__getitem__(portal.teaching.default_page).__getitem__(item).title" />
                </a>
                <span tal:define="t python: portal.teaching.__getitem__(portal.teaching.default_page).__getitem__(item)" tal:replace="default">
                    (<span tal:define="tt t/lecture_type|t/practicalcourse_type|t/seminar_type" tal:replace="tt" />)
                </span>
            </li>
        </ul>
    </div>

    <div tal:define="text context/teaching_misc|nothing"
         tal:condition="python: text != None"
         tal:content="structure text" />

    <div>
         For my previously taught courses please see
        <a href="link" tal:attributes="href python: context.portal_url() + '/teaching/all-terms/'">All Terms
            <!--<span tal:replace="python: portal.teaching.all_terms.title"/>-->
        </a> section.
    </div>

    <div tal:define="text context/students" tal:condition="python: text != None">
        <h2>Students</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="people python:[person[0] for person in portal.people.items()
                                           if person[1].meta_type == 'Person']"
                tal:condition="python: item in people">
                <a tal:attributes="href python: context.portal_url() + '/people/' + item">
                    <span tal:content="python: portal.people.__getitem__(item).title" />
                </a>
            </li>
        </ul>
    </div>

    <div tal:define="text context/misc"
         tal:condition="python: text != None"
         tal:content="structure text" />

    <div tal:define="text context/publications" tal:condition="python: text != None">
        <h2>Selected Publications</h2>
        <ul tal:define="items python:text.split()" tal:repeat="item items">
            <li tal:define="publications python:[publication[0] for publication in portal.publications.items()
                                                 if publication[1].meta_type == 'Publication']"
                tal:condition="python: item in publications">
                <div tal:define="pub python: portal.publications.__getitem__(item);
                                 authorlist context/author_list">
                 <span tal:condition="pub/author | nothing">
                    <span tal:define="authors python: context.auth(pub.author)">
                      <span tal:repeat="author authors">
                           <b> <a tal:condition="python: portal.people.__contains__(author)"
                                   href="link" tal:attributes="href python: context.portal_url() + '/people/' + author"
                                   tal:content="python:
                                   portal.people.__getitem__(author).filtered_name(portal.people.__getitem__(author))">Int. Author</a></b>
                            <b tal:condition="not:python: portal.people.__contains__(author)"
                                   tal:content="author">Ex. Author></b>,
                       </span>
                    </span>
                  </span>
                    <a tal:condition="pub/title | nothing"
                       tal:attributes="href python: context.portal_url() + '/publications/' + pub.id">
                        <span class="pubtitle" tal:content="pub/title">Title</span>,
                    </a>
                    <span tal:condition="pub/pubtype | nothing">
                        <p tal:condition="pub/pubtype" tal:replace="pub/pubtype">Pubtype</p>,
                    </span>
                    <span tal:condition="pub/year | nothing">
                        <p tal:replace="pub/year">Year</p>,
                    </span>
                    <span tal:define="published_in pub/journal | nothing"
                          tal:condition="published_in">
                        <p tal:replace="published_in">Published in</p>,
                    </span>
                    <span tal:define="published_in pub/booktitle | nothing"
                          tal:condition="published_in">
                        <p tal:replace="published_in">Published in</p>,
                    </span>
                    <div>
                        <span tal:condition="python: pub.id + '.bib' in portal.publications.bibtex.keys()">
                            (<a tal:attributes="href python: context.portal_url() + '/publications/bibtex/' + pub.id + '.bib/view'">BibTeX</a>)
                        </span>
                        <span tal:condition="python: pub.id + '.pdf' in portal.publications.pdf.keys()">
                            (<a tal:attributes="href python: context.portal_url() + '/publications/pdf/' + pub.id + '.pdf'">PDF</a>)
                        </span>
                    </div>
                </div>
            </li>
        </ul>
    </div>

    <div>
         For the full list of my Publications please see the
        <a href="link" tal:attributes="href python: context.portal_url() + '/publications/publications/by_author#' + context.id">
            <span tal:replace="python: portal.publications.title"/>
        </a> section.
    </div>

    <hr />

    <div tal:replace="structure provider:plone.abovecontentbody" />

    <div tal:replace="structure provider:plone.belowcontentbody" />

</div>
</body>
</html>
